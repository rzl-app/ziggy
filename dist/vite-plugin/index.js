import{run as r}from"vite-plugin-run";import{readFileSync as o}from"fs";import{resolve as n}from"path";function e(){return e=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var e in n)({}).hasOwnProperty.call(n,e)&&(r[e]=n[e])}return r},e.apply(null,arguments)}const t={sail:!1,types:!0,typesOnly:!1,only:[],except:[]},s="rzl-app/ziggy";var i=(i={})=>{try{const p=((r,o)=>{const n=[o.sail&&!process.env.LARAVEL_SAIL?"sail":"php","artisan","rzl-ziggy:generate"];return o.group&&n.push("--group",o.group),o.url&&n.push("--url",o.url),["1","2"].includes(r)&&(o.types&&n.push("--types"),o.typesOnly&&n.push("--types-only"),"1"===r&&(o.only.length>0&&n.push("--only",o.only.join(",")),o.except.length>0&&n.push("--except",o.except.join(",")))),n})((()=>{try{var r;const e=n(process.cwd(),"composer.json"),t=JSON.parse(o(e,"utf-8"));if(null==(r=t.require)||!r[s])throw new Error(`${s} not found in composer.json dependencies`);const i=t.require[s],p=i.match(/^[~^><]?(\d+)/);if(!p)throw new Error(`Invalid version format for ${s}: ${i}`);return p[1]}catch(r){if(r instanceof Error&&"ENOENT"===r.code)throw new Error("composer.json not found in project root");throw r}})(),e({},t,i)),{configResolved:c,handleHotUpdate:l}=r("development"===process.env.NODE_ENV?[{name:"rzl-ziggy-generator",run:p,condition:r=>r.includes("/routes/")&&r.endsWith(".php")||r.includes("/")&&r.includes(".env")}]:[]);return{name:"rzl-ziggy-plugin",configResolved:c,handleHotUpdate:l}}catch(r){if(console.error("\n[rzl-vite-plugin-ziggy] Error:"),!(r instanceof Error))throw r;console.error(r.message),"development"===process.env.NODE_ENV&&console.error(r.stack)}return{}};export{i as default};

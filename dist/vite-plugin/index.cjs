"use strict";var z=Object.create;var d=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var V=(r,e)=>{for(var o in e)d(r,o,{get:e[o],enumerable:!0})},y=(r,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of B(e))!O.call(r,s)&&s!==o&&d(r,s,{get:()=>e[s],enumerable:!(i=R(e,s))||i.enumerable});return r};var h=(r,e,o)=>(o=r!=null?z(N(r)):{},y(e||!r||!r.__esModule?d(o,"default",{value:r,enumerable:!0}):o,r)),P=r=>y(d({},"__esModule",{value:!0}),r);var A={};V(A,{default:()=>j});module.exports=P(A);var m=h(require("path"),1),n=h(require("chalk"),1),C=require("vite-plugin-run");var $={sail:!1,types:!0,typesOnly:!1,delay:100,throttle:300,only:[],except:[]};var w=require("fs"),v=require("path");var t=h(require("chalk"),1),g=t.default.bgHex("#00bcd4").black.bold(" RZL-ZIGGY "),p={info:(r,e)=>{console.log(`
${g} ${t.default.blueBright(r)} ${t.default.gray("‚Üí")} ${t.default.white(e)}`)},success:(r,e)=>{console.log(`
${g} ${t.default.greenBright("‚úÖ "+r)} ${t.default.gray("‚Üí")} ${t.default.whiteBright(e)}`)},warn:(r,e)=>{console.warn(`
${g} ${t.default.yellow("‚ö†Ô∏è  "+r)} ${t.default.gray("‚Üí")} ${t.default.yellowBright(e)}`)},error:(r,e)=>{console.error(`
${g} ${t.default.redBright("‚ùå "+r)} ${t.default.gray("‚Üí")} ${t.default.red(e)}`)},throw:(r,e)=>{throw e instanceof Error?(p.error(r,e.message),process.env.NODE_ENV==="development"&&console.error(t.default.gray(e.stack)),e):(p.error(r,"Unknown error occurred"),new Error(typeof e=="string"?e:"Unknown error"))},raw:r=>console.log(`
${g} ${r}`)};function c(r,e){throw p.throw(r,e),typeof e=="string"?new Error(e):e}var a="rzl-app/ziggy",E=()=>{try{let r=(0,v.resolve)(process.cwd(),"composer.json"),e=JSON.parse((0,w.readFileSync)(r,"utf-8"));e.require?.[a]||c("composer.json",`${a} not found in composer.json dependencies`);let o=e.require[a],i=o.match(/^[~^><]?(\d+)/);i||c("Version Format",`Invalid version format for ${a}: ${o}`);let s=i[1];return p.success("Composer Package",`${a} v${s}`),s}catch(r){r instanceof Error&&r.code==="ENOENT"&&c("composer.json",`File not found in ${process.cwd()}`),r instanceof Error&&c("Version Fetch Failed",r),c("Unknown Error","Something exploded üí£")}};var x=(r,e)=>{let o=[e.sail&&!process.env.LARAVEL_SAIL?"sail":"php","artisan","rzl-ziggy:generate"];return e.group&&o.push("--group",e.group),e.url&&o.push("--url",e.url),["1","2"].includes(r)&&(e.types&&o.push("--types"),e.typesOnly&&o.push("--types-only"),r==="1"&&(e.only.length>0&&o.push("--only",e.only.join(",")),e.except.length>0&&o.push("--except",e.except.join(",")))),o};var j=(r={})=>{try{let e=E(),{delay:o,throttle:i,...s}=r,f=x(e,{...$,...s}),{configResolved:k,handleHotUpdate:b}=(0,C.run)(process.env.NODE_ENV==="development"?[{delay:o,throttle:i,onFileChanged:({file:l})=>{let u=m.default.relative(process.cwd(),l).replace(/\\/g,"/");console.log(`
üõ∞Ô∏è  ${n.default.cyanBright("Live Watcher")} ${n.default.gray("detected change in")} ${n.default.yellowBright(u)}`),console.log(`${n.default.hex("#ff6f00")("üîÅ Rerunning")} ${n.default.bold.cyan(f.join(" "))} ${n.default.gray("...syncing fresh routes üö¶")}
`)},name:"rzl-ziggy-generator",run:f,pattern:["routes/**/*.php",".*.env",".*.*.env",".env.*",".env.*.*"],condition:l=>{let u=m.default.relative(process.cwd(),l);return l.includes("/routes/")&&l.endsWith(".php")||l.includes("/")&&l.includes(".env")||/^routes\/.*\.php$/.test(u.replace(/\\/g,"/"))||/\.env(\..+)?$/.test(u)}}]:[]);return{name:"rzl-ziggy-plugin",configResolved:k,handleHotUpdate:b}}catch(e){if(console.error(`
${n.default.bgRed.white.bold(" RZL ZIGGY ERROR ")} ${n.default.redBright("An error occurred in")} ${n.default.yellow("[rzl-app-ziggy/vite-plugin]")} üö®`),e instanceof Error)console.error(`${n.default.red("‚ùå Message:")} ${n.default.white(e.message)}`),process.env.NODE_ENV==="development"?console.error(`${n.default.gray("üìç Stack Trace:")}
${n.default.dim(e.stack||"")}`):console.error(`${n.default.gray("‚ÑπÔ∏è  Tip:")} Run in ${n.default.cyan("development")} mode to see stack trace.`);else throw console.error(`${n.default.red("‚ùì Unknown error type thrown:")}`),e}return{}};

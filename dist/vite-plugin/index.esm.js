import{run as r}from"vite-plugin-run";import{readFileSync as o}from"fs";import{resolve as n}from"path";function e(){return e=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var e in n)({}).hasOwnProperty.call(n,e)&&(r[e]=n[e])}return r},e.apply(null,arguments)}var t={sail:!1,types:!0,typesOnly:!1,only:[],except:[]},i="rzl-app/ziggy",p=function(p){void 0===p&&(p={});try{var s=function(r,o){var n=[o.sail&&!process.env.LARAVEL_SAIL?"sail":"php","artisan","rzl-ziggy:generate"];return o.group&&n.push("--group",o.group),o.url&&n.push("--url",o.url),["1","2"].includes(r)&&(o.types&&n.push("--types"),o.typesOnly&&n.push("--types-only"),"1"===r&&(o.only.length>0&&n.push("--only",o.only.join(",")),o.except.length>0&&n.push("--except",o.except.join(",")))),n}(function(){try{var r,e=n(process.cwd(),"composer.json"),t=JSON.parse(o(e,"utf-8"));if(null==(r=t.require)||!r[i])throw new Error(i+" not found in composer.json dependencies");var p=t.require[i],s=p.match(/^[~^><]?(\d+)/);if(!s)throw new Error("Invalid version format for "+i+": "+p);return s[1]}catch(r){if(r instanceof Error&&"ENOENT"===r.code)throw new Error("composer.json not found in project root");throw r}}(),e({},t,p)),c=r("development"===process.env.NODE_ENV?[{name:"rzl-ziggy-generator",run:s,condition:function(r){return r.includes("/routes/")&&r.endsWith(".php")||r.includes("/")&&r.includes(".env")}}]:[]);return{name:"rzl-ziggy-plugin",configResolved:c.configResolved,handleHotUpdate:c.handleHotUpdate}}catch(r){if(console.error("\n[rzl-vite-plugin-ziggy] Error:"),!(r instanceof Error))throw r;console.error(r.message),"development"===process.env.NODE_ENV&&console.error(r.stack)}return{}};export{p as default};

"use strict";var de=Object.create;var S=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var he=Object.getOwnPropertyNames;var ye=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty;var C=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),be=(i,e)=>{for(var r in e)S(i,r,{get:e[r],enumerable:!0})},W=(i,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of he(e))!me.call(i,n)&&n!==r&&S(i,n,{get:()=>e[n],enumerable:!(t=ge(e,n))||t.enumerable});return i};var K=(i,e,r)=>(r=i!=null?de(ye(i)):{},W(e||!i||!i.__esModule?S(r,"default",{value:i,enumerable:!0}):r,i)),ve=i=>W(S({},"__esModule",{value:!0}),i);var A=C((Je,G)=>{"use strict";var Re=String.prototype.replace,we=/%20/g,D={RFC1738:"RFC1738",RFC3986:"RFC3986"};G.exports={default:D.RFC3986,formatters:{RFC1738:function(i){return Re.call(i,we,"+")},RFC3986:function(i){return String(i)}},RFC1738:D.RFC1738,RFC3986:D.RFC3986}});var q=C((er,Y)=>{"use strict";var xe=A(),I=Object.prototype.hasOwnProperty,w=Array.isArray,v=function(){for(var i=[],e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i}(),Ee=function(e){for(;e.length>1;){var r=e.pop(),t=r.obj[r.prop];if(w(t)){for(var n=[],o=0;o<t.length;++o)typeof t[o]<"u"&&n.push(t[o]);r.obj[r.prop]=n}}},X=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(t[n]=e[n]);return t},Oe=function i(e,r,t){if(!r)return e;if(typeof r!="object"){if(w(e))e.push(r);else if(e&&typeof e=="object")(t&&(t.plainObjects||t.allowPrototypes)||!I.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var n=e;return w(e)&&!w(r)&&(n=X(e,t)),w(e)&&w(r)?(r.forEach(function(o,a){if(I.call(e,a)){var u=e[a];u&&typeof u=="object"&&o&&typeof o=="object"?e[a]=i(u,o,t):e.push(o)}else e[a]=o}),e):Object.keys(r).reduce(function(o,a){var u=r[a];return I.call(o,a)?o[a]=i(o[a],u,t):o[a]=u,o},n)},je=function(e,r){return Object.keys(r).reduce(function(t,n){return t[n]=r[n],t},e)},Pe=function(i,e,r){var t=i.replace(/\+/g," ");if(r==="iso-8859-1")return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch{return t}},Ce=function(e,r,t,n,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var u="",l=0;l<a.length;++l){var s=a.charCodeAt(l);if(s===45||s===46||s===95||s===126||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||o===xe.RFC1738&&(s===40||s===41)){u+=a.charAt(l);continue}if(s<128){u=u+v[s];continue}if(s<2048){u=u+(v[192|s>>6]+v[128|s&63]);continue}if(s<55296||s>=57344){u=u+(v[224|s>>12]+v[128|s>>6&63]+v[128|s&63]);continue}l+=1,s=65536+((s&1023)<<10|a.charCodeAt(l)&1023),u+=v[240|s>>18]+v[128|s>>12&63]+v[128|s>>6&63]+v[128|s&63]}return u},$e=function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],n=0;n<r.length;++n)for(var o=r[n],a=o.obj[o.prop],u=Object.keys(a),l=0;l<u.length;++l){var s=u[l],f=a[s];typeof f=="object"&&f!==null&&t.indexOf(f)===-1&&(r.push({obj:a,prop:s}),t.push(f))}return Ee(r),e},_e=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Se=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Ae=function(e,r){return[].concat(e,r)},Ne=function(e,r){if(w(e)){for(var t=[],n=0;n<e.length;n+=1)t.push(r(e[n]));return t}return r(e)};Y.exports={arrayToObject:X,assign:je,combine:Ae,compact:$e,decode:Pe,encode:Ce,isBuffer:Se,isRegExp:_e,maybeMap:Ne,merge:Oe}});var ne=C((rr,te)=>{"use strict";var Z=q(),$=A(),Ve=Object.prototype.hasOwnProperty,J={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},x=Array.isArray,Te=String.prototype.split,Fe=Array.prototype.push,re=function(i,e){Fe.apply(i,x(e)?e:[e])},ze=Date.prototype.toISOString,ee=$.default,y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Z.encode,encodeValuesOnly:!1,format:ee,formatter:$.formatters[ee],indices:!1,serializeDate:function(e){return ze.call(e)},skipNulls:!1,strictNullHandling:!1},De=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ie=function i(e,r,t,n,o,a,u,l,s,f,g,d,h,p){var c=e;if(typeof u=="function"?c=u(r,c):c instanceof Date?c=f(c):t==="comma"&&x(c)&&(c=Z.maybeMap(c,function(z){return z instanceof Date?f(z):z})),c===null){if(n)return a&&!h?a(r,y.encoder,p,"key",g):r;c=""}if(De(c)||Z.isBuffer(c)){if(a){var L=h?r:a(r,y.encoder,p,"key",g);if(t==="comma"&&h){for(var B=Te.call(String(c),","),H="",_=0;_<B.length;++_)H+=(_===0?"":",")+d(a(B[_],y.encoder,p,"value",g));return[d(L)+"="+H]}return[d(L)+"="+d(a(c,y.encoder,p,"value",g))]}return[d(r)+"="+d(String(c))]}var T=[];if(typeof c>"u")return T;var P;if(t==="comma"&&x(c))P=[{value:c.length>0?c.join(",")||null:void 0}];else if(x(u))P=u;else{var k=Object.keys(c);P=l?k.sort(l):k}for(var F=0;F<P.length;++F){var R=P[F],M=typeof R=="object"&&typeof R.value<"u"?R.value:c[R];if(!(o&&M===null)){var pe=x(c)?typeof t=="function"?t(r,R):r:r+(s?"."+R:"["+R+"]");re(T,i(M,pe,t,n,o,a,u,l,s,f,g,d,h,p))}}return T},qe=function(e){if(!e)return y;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||y.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=$.default;if(typeof e.format<"u"){if(!Ve.call($.formatters,e.format))throw new TypeError("Unknown format option provided.");t=e.format}var n=$.formatters[t],o=y.filter;return(typeof e.filter=="function"||x(e.filter))&&(o=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:y.addQueryPrefix,allowDots:typeof e.allowDots>"u"?y.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:y.charsetSentinel,delimiter:typeof e.delimiter>"u"?y.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:y.encode,encoder:typeof e.encoder=="function"?e.encoder:y.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:y.encodeValuesOnly,filter:o,format:t,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:y.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:y.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:y.strictNullHandling}};te.exports=function(i,e){var r=i,t=qe(e),n,o;typeof t.filter=="function"?(o=t.filter,r=o("",r)):x(t.filter)&&(o=t.filter,n=o);var a=[];if(typeof r!="object"||r===null)return"";var u;e&&e.arrayFormat in J?u=e.arrayFormat:e&&"indices"in e?u=e.indices?"indices":"repeat":u="indices";var l=J[u];n||(n=Object.keys(r)),t.sort&&n.sort(t.sort);for(var s=0;s<n.length;++s){var f=n[s];t.skipNulls&&r[f]===null||re(a,Ie(r[f],f,l,t.strictNullHandling,t.skipNulls,t.encode?t.encoder:null,t.filter,t.sort,t.allowDots,t.serializeDate,t.format,t.formatter,t.encodeValuesOnly,t.charset))}var g=a.join(t.delimiter),d=t.addQueryPrefix===!0?"?":"";return t.charsetSentinel&&(t.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),g.length>0?d+g:""}});var ae=C((tr,oe)=>{"use strict";var O=q(),Q=Object.prototype.hasOwnProperty,Ze=Array.isArray,m={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:O.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Qe=function(i){return i.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},ie=function(i,e){return i&&typeof i=="string"&&e.comma&&i.indexOf(",")>-1?i.split(","):i},Ue="utf8=%26%2310003%3B",Le="utf8=%E2%9C%93",Be=function(e,r){var t={},n=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=n.split(r.delimiter,o),u=-1,l,s=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===Le?s="utf-8":a[l]===Ue&&(s="iso-8859-1"),u=l,l=a.length);for(l=0;l<a.length;++l)if(l!==u){var f=a[l],g=f.indexOf("]="),d=g===-1?f.indexOf("="):g+1,h,p;d===-1?(h=r.decoder(f,m.decoder,s,"key"),p=r.strictNullHandling?null:""):(h=r.decoder(f.slice(0,d),m.decoder,s,"key"),p=O.maybeMap(ie(f.slice(d+1),r),function(c){return r.decoder(c,m.decoder,s,"value")})),p&&r.interpretNumericEntities&&s==="iso-8859-1"&&(p=Qe(p)),f.indexOf("[]=")>-1&&(p=Ze(p)?[p]:p),Q.call(t,h)?t[h]=O.combine(t[h],p):t[h]=p}return t},He=function(i,e,r,t){for(var n=t?e:ie(e,r),o=i.length-1;o>=0;--o){var a,u=i[o];if(u==="[]"&&r.parseArrays)a=[].concat(n);else{a=r.plainObjects?Object.create(null):{};var l=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,s=parseInt(l,10);!r.parseArrays&&l===""?a={0:n}:!isNaN(s)&&u!==l&&String(s)===l&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(a=[],a[s]=n):l!=="__proto__"&&(a[l]=n)}n=a}return n},ke=function(e,r,t,n){if(e){var o=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,l=t.depth>0&&a.exec(o),s=l?o.slice(0,l.index):o,f=[];if(s){if(!t.plainObjects&&Q.call(Object.prototype,s)&&!t.allowPrototypes)return;f.push(s)}for(var g=0;t.depth>0&&(l=u.exec(o))!==null&&g<t.depth;){if(g+=1,!t.plainObjects&&Q.call(Object.prototype,l[1].slice(1,-1))&&!t.allowPrototypes)return;f.push(l[1])}return l&&f.push("["+o.slice(l.index)+"]"),He(f,r,t,n)}},Me=function(e){if(!e)return m;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?m.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?m.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:m.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:m.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:m.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:m.comma,decoder:typeof e.decoder=="function"?e.decoder:m.decoder,delimiter:typeof e.delimiter=="string"||O.isRegExp(e.delimiter)?e.delimiter:m.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:m.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:m.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:m.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:m.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:m.strictNullHandling}};oe.exports=function(i,e){var r=Me(e);if(i===""||i===null||typeof i>"u")return r.plainObjects?Object.create(null):{};for(var t=typeof i=="string"?Be(i,r):i,n=r.plainObjects?Object.create(null):{},o=Object.keys(t),a=0;a<o.length;++a){var u=o[a],l=ke(u,t[u],r,typeof i=="string");n=O.merge(n,l,r)}return O.compact(n)}});var U=C((nr,se)=>{"use strict";var We=ne(),Ke=ae(),Ge=A();se.exports={formats:Ge,parse:Ke,stringify:We}});var Xe={};be(Xe,{route:()=>j,rzlZiggyVue:()=>ce,useRoute:()=>fe});module.exports=ve(Xe);var le=K(U(),1);var ue=K(U(),1),E=class{name;definition;config;wheres;bindings;constructor(e,r,t){this.name=e,this.definition=r,this.bindings=r.bindings??{},this.wheres=r.wheres??{},this.config=t}get template(){let e=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return e===""?"/":e}get origin(){if(!this.config.absolute)return"";if(this.definition.domain){let e=this.config.url.match(/^\w+:\/\//);if(!e)throw new Error("Invalid config.url: missing protocol (e.g., http:// or https://)");return`${e[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`}return this.config.url}get parameterSegments(){return this.template.match(/{[^}?]+\??}/g)?.map(e=>({name:e.replace(/{|\??}/g,""),required:!/\?}$/.test(e)}))??[]}matchesUrl(e){if(!this.definition.methods.includes("GET"))return!1;let r=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(a,u,l,s)=>{let f=`(?<${l}>${this.wheres[l]?.replace(/(^\^)|(\$$)/g,"")||"[^/?]+"})`;return s?`(${u}${f})?`:`${u}${f}`}).replace(/^\w+:\/\//,""),[t,n]=e.replace(/^\w+:\/\//,"").split("?"),o=new RegExp(`^${r}/?$`).exec(t)??new RegExp(`^${r}/?$`).exec(decodeURI(t));if(o){for(let a in o.groups)o.groups[a]=typeof o.groups[a]=="string"?decodeURIComponent(o.groups[a]):o.groups[a];return{params:o.groups,query:(0,ue.parse)(n)}}return!1}compile(e={}){let r=this.template.replace(/{([^}?]+)(\??)}/g,(n,o,a)=>{let u=e[o];if(u==null){if(a)return"";throw new Error(`Rzl-Ziggy Error: '${o}' parameter is required for route '${this.name}'.`)}if(this.wheres[o]&&!new RegExp(`^${this.wheres[o]}$`).test(String(u)))throw new Error(`Rzl-Ziggy Error: '${o}' parameter '${u}' does not match required format '${this.wheres[o]}' for route '${this.name}'.`);return encodeURI(String(u)).replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}),t=r;if(this.config.absolute&&r.includes("://")){let[n,o]=r.split("://");t=n+"://"+o.replace(/\/{2,}/g,"/")}else t=r.replace(/\/{2,}/g,"/");return t==="/"?"/":t.replace(/\/+$/,"")}_compile(e){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(t,n,o)=>{if(!o&&[null,void 0].includes(e[n]))throw new Error(`Rzl-Ziggy Error: '${n}' parameter is required for route '${this.name}'.`);if(this.wheres[n]&&!new RegExp(`^${o?`(${this.wheres[n]})?`:this.wheres[n]}$`).test(e[n]??""))throw new Error(`Rzl-Ziggy Error: '${n}' parameter '${e[n]}' does not match required format '${this.wheres[n]}' for route '${this.name}'.`);return encodeURI(e[n]??"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}};var b=class i extends Error{constructor(r,t){super(r);this.originalError=t;this.name="RouterConfigError",Error.captureStackTrace&&Error.captureStackTrace(this,i)}};var N=class i{absolute;url;port;defaults;routes;location;constructor(e){this.absolute=e.absolute,this.url=e.url,this.port=e.port,this.defaults=e.defaults,this.routes=e.routes,this.location=e.location}static isRouterConfigRaw(e){if(typeof e!="object"||e===null)return!1;let r=e;if(typeof r.url!="string")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid config object, \`config\` need object type but you passing as \`${typeof r}\`.`);if(r.port!==null&&typeof r.port!="number")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.port\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.port\`, \`config.port\` need number or null type but you passing as \`${typeof r.port}\`.`);if(typeof r.defaults!="object"||r.defaults===null)throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.defaults\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.defaults\`, \`config.defaults\` need array or object type but you passing as \`${typeof r.defaults}\`.`);if(typeof r.routes!="object"||r.routes===null||Array.isArray(r.routes))throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.routes\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.routes\`, \`config.routes\` need object type but you passing as \`${typeof r.routes=="object"?"Array":typeof r.routes}\`.`);if("location"in r){let t=r.location;if(typeof t=="string")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.location\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid config object, \`config.location\` need object type\`{ host?: string | undefined; pathname?: string | undefined ;search?: string | undefined; }\` but you passing as \`${typeof t}\`.`);if(typeof t!="object"||t===null||Array.isArray(t))throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.location\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.location\`, \`config.location\` need object type but you passing as \`${typeof r.location=="object"?"Array":typeof r.location}\`.`);let n=t;if("host"in n&&typeof n.host!="string"&&typeof n.host<"u")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.location.host\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.location.host\`, \`config.location.host\` need string or undefined type but you passing as \`${typeof r.location?.host}\`.`);if("pathname"in n&&typeof n.pathname!="string"&&typeof n.pathname<"u")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.location.pathname\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.location.pathname\`, \`config.location.pathname\` need string or undefined type but you passing as \`${typeof r.location?.pathname}\`.`);if("search"in n&&typeof n.search!="string"&&typeof n.search<"u")throw new b(`Rzl-Ziggy Error: Invalid \`route()\` \`config.location.search\` properties detected. Ensure that \`appRoutes\` is defined globally or passed as a valid \`config.location.search\`, \`config.location.search\` need string or undefined type but you passing as \`${typeof r.location?.search}\`.`)}return!0}static validateAndWrap(e){try{if(e instanceof i)return e;if(!this.isRouterConfigRaw(e))throw new b("Rzl-Ziggy Error: Invalid `route()` config properties detected. Ensure that `appRoutes` is defined globally or passed as a valid config object.");return new i(e)}catch(r){throw r instanceof b?r:new b("Rzl-Ziggy Error: Invalid `route()` config properties detected. Ensure that `appRoutes` is defined globally or passed as a valid config object.",r instanceof Error?r:new Error(String(r)))}}};var V=class extends String{_config;_route;_params={};constructor(e,r,t=!0,n){super();let o=this.safeValidateRouterConfig(n??(typeof appRoutes<"u"?appRoutes:globalThis.appRoutes));if(this._config={...o,absolute:t},e){if(!this._config.routes[e])throw new Error(`Rzl-Ziggy Error: route '${e}' is not in the route list.`);this._route=new E(e,this._config.routes[e],this._config),this._params=this._parse(r)}}safeValidateRouterConfig(e,r=!1){try{return N.validateAndWrap(e)}catch(t){throw t instanceof b?t:new Error("Rzl-Ziggy Unknown error while validating `route()` config",{cause:t instanceof Error?t:void 0})}}_unresolve(e){e?this._config?.absolute&&e.startsWith("/")&&(e=this._location().host+e):e=this._currentUrl();let r={},[t,n]=Object.entries(this._config.routes).find(([o,a])=>r=new E(o,a,this._config).matchesUrl(e))||[void 0,void 0];return{name:t,...r,route:n}}_currentUrl(){let{host:e,pathname:r,search:t}=this._location();return(this._config.absolute?e+r:r.replace(this._config.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+t}_location(){let{host:e="",pathname:r="",search:t=""}=typeof window<"u"?window.location:{};return{host:this._config.location?.host??e,pathname:this._config.location?.pathname??r,search:this._config.location?.search??t}}_parse(e={},r=this._route){e??={},e=["string","number"].includes(typeof e)?[e]:e;let t=r.parameterSegments.filter(({name:n})=>!this._config.defaults[n])||[];return Array.isArray(e)?e=e.reduce((n,o,a)=>t[a]?{...n,[t[a].name]:o}:typeof o=="object"?{...n,...o}:{...n,[o]:""},{}):t.length===1&&!e[t[0].name]&&(e.hasOwnProperty(Object.values(r.bindings)[0])||e.hasOwnProperty("id"))&&(e={[t[0].name]:e}),{...this._defaults(r),...this._substituteBindings(e,r)}}_defaults(e){return e.parameterSegments.filter(({name:r})=>this._config.defaults[r]).reduce((r,{name:t},n)=>({...r,[t]:this._config.defaults[t]}),{})}_substituteBindings(e,r){return Object.entries(e).reduce((t,[n,o])=>{if(!o||typeof o!="object"||Array.isArray(o)||!r.parameterSegments.some(({name:a})=>a===n))return{...t,[n]:o};if(!o.hasOwnProperty(r.bindings[n]))if(o.hasOwnProperty("id"))r.bindings[n]="id";else throw new Error(`Rzl-Ziggy Error: object passed as '${n}' parameter is missing route model binding key '${r.bindings[n]}'.`);return{...t,[n]:o[r.bindings[n]]}},{})}get params(){let{params:e,query:r}=this._unresolve();return{...e,...r}}get routeParams(){return this._unresolve().params||{}}get queryParams(){return this._unresolve().query||{}}has(e){return this._config.routes.hasOwnProperty(e)}toString(){let e=Object.keys(this._params).filter(t=>!this._route.parameterSegments.some(({name:n})=>n===t)).filter(t=>t!=="_query").reduce((t,n)=>({...t,[n]:this._params[n]}),{}),r=this._params?._query;if(r!==void 0&&(typeof r!="object"||r===null||Array.isArray(r)))throw new Error("Rzl-Ziggy Error: The 'params._query' property must be a plain object.");return this._route.compile(this._params)+(0,le.stringify)({...e,...r},{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(t,n)=>typeof t=="boolean"?Number(t):n(t)})}current(e,r={}){let{name:t,params:n,query:o,route:a}=this._unresolve();if(!e)return t;let u=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(t);if([null,void 0].includes(r)||!u)return u;let l=new E(t,a,this._config);r=this._parse(r,l);let s={...n,...o};if(Object.values(r).every(g=>!g)&&!Object.values(s).some(g=>g!==void 0))return!0;let f=(g,d)=>Object.entries(g).every(([h,p])=>Array.isArray(p)&&Array.isArray(d[h])?p.every(c=>d[h].includes(c)):typeof p=="object"&&typeof d[h]=="object"&&p!==null&&d[h]!==null?f(p,d[h]):d[h]==p);return f(r,s)}valueOf(){return this.toString()}};function j(i,e,r=!1,t){let n=new V(i,e,r,t);return i?n.toString():n}function fe(i){if(!i&&!globalThis.appRoutes&&typeof appRoutes>"u")throw new Error("Rzl-Ziggy Error: useRouter() missing configuration. Ensure that a `appRoutes` variable is defined globally or pass a config object into the useRoute hook.");return(e,r,t)=>j(e,r,t,i)}var ce={install:function(i,e){let r=(t,n,o)=>j(t,n,o,e);parseInt(i.version)>2?(i.config.globalProperties.route=r,i.provide("route",r)):i.mixin({methods:{route:r}})}};0&&(module.exports={route,rzlZiggyVue,useRoute});
